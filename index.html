<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Informasi PPPK Paruh Waktu - Kanreg II BKN</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Roboto -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Roboto", sans-serif;
      }

      /* Properti custom untuk animasi diagram lingkaran */
      @property --p {
        syntax: "<number>";
        inherits: true;
        initial-value: 0;
      }

      /* Animasi untuk diagram lingkaran */
      .pie {
        --p: 12.7; /* Persentase penyelesaian */
        --b: 22px; /* Ketebalan diagram */
        --c: #16a34a; /* Warna utama (hijau) */
        --w: 150px; /* Ukuran diagram */
        width: var(--w);
        aspect-ratio: 1;
        position: relative;
        display: inline-grid;
        margin: 5px;
        place-content: center;
        font-size: 25px;
        font-weight: bold;
        animation: pie-animation 1s 1s both;
      }

      .pie:before {
        content: "";
        position: absolute;
        border-radius: 50%;
        inset: 0;
        background: radial-gradient(farthest-side, var(--c) 98%, #0000)
            top/var(--b) var(--b) no-repeat,
          conic-gradient(var(--c) calc(var(--p) * 1%), #e5e7eb 0);
        -webkit-mask: radial-gradient(
          farthest-side,
          #0000 calc(99% - var(--b)),
          #000 calc(100% - var(--b))
        );
        mask: radial-gradient(
          farthest-side,
          #0000 calc(99% - var(--b)),
          #000 calc(100% - var(--b))
        );
      }

      @keyframes pie-animation {
        from {
          --p: 0;
        }
      }

      /* Styling untuk tabel di perangkat mobile */
      @media (max-width: 768px) {
        .responsive-table thead {
          display: none;
        }
        .responsive-table tr {
          display: block;
          margin-bottom: 1rem;
          border-bottom: 2px solid #ddd;
          padding-bottom: 1rem;
        }
        .responsive-table tr:last-child {
          border-bottom: 0;
          margin-bottom: 0;
          padding-bottom: 0;
        }
        .responsive-table td {
          display: block;
          text-align: right;
          position: relative;
          padding-left: 50%;
          border-bottom: 1px dotted #ccc;
        }
        .responsive-table td:last-child {
          border-bottom: 0;
        }
        .responsive-table td:before {
          content: attr(data-label);
          position: absolute;
          left: 0;
          width: 45%;
          padding-left: 1rem;
          font-weight: bold;
          text-align: left;
        }
      }
    </style>
  </head>
  <body class="bg-slate-50 text-slate-800">
    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
      <!-- Header -->
      <header class="flex justify-between items-center mb-8">
        <div class="flex items-center space-x-3">
          <svg
            class="w-12 h-12 text-slate-700"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z"
            />
          </svg>
          <div>
            <h2 class="font-bold text-sm md:text-base text-slate-600">
              BADAN KEPEGAWAIAN NEGARA
            </h2>
            <p class="text-xs md:text-sm text-slate-500">
              KANTOR REGIONAL II SURABAYA
            </p>
          </div>
        </div>
        <div class="text-right">
          <p class="font-bold text-sm md:text-lg text-red-600">BerAKHLAK</p>
          <p class="text-xs md:text-sm text-slate-500">#banggamelayanibangsa</p>
        </div>
      </header>

      <!-- Judul Utama -->
      <main>
        <div class="text-center mb-8">
          <h1
            class="text-3xl md:text-5xl font-extrabold text-slate-800 leading-tight"
          >
            Progress Penetapan <br />
            <span class="text-red-600">Nomor Induk PPPK Paruh Waktu</span>
          </h1>
          <p class="mt-4 text-slate-500">
            Data diperoleh pada 25 September 2025 | 21.00 WIB
          </p>
        </div>

        <!-- Statistik Global -->
        <div
          class="flex flex-col md:flex-row items-center justify-center gap-8 md:gap-12 mb-10"
        >
          <div
            class="w-full md:w-auto grid grid-cols-2 sm:grid-cols-3 gap-4 text-center"
          >
            <div class="bg-white p-3 rounded-xl shadow-md border">
              <p class="text-slate-500">Proses</p>
              <p id="proses" class="text-2xl font-bold">0</p>
            </div>
            <div class="bg-white p-3 rounded-xl shadow-md border">
              <p class="text-slate-500">BTS</p>
              <p id="bts" class="text-2xl font-bold">0</p>
            </div>
            <div class="bg-white p-3 rounded-xl shadow-md border">
              <p class="text-slate-500">TMS</p>
              <p id="tms" class="text-2xl font-bold">0</p>
            </div>
            <div class="bg-white p-3 rounded-xl shadow-md border">
              <p class="text-slate-500">ACC</p>
              <p id="acc" class="text-2xl font-bold">0</p>
            </div>
            <div
              class="bg-white p-3 rounded-xl shadow-md border col-span-2 sm:col-span-1"
            >
              <p class="text-slate-500">Total Usul Masuk</p>
              <p id="total" class="text-2xl font-bold">0</p>
            </div>
          </div>
          <div class="flex-shrink-0">
            <div class="pie"><span id="percentage-text">0</span>%</div>
          </div>
        </div>

        <!-- Tabel Data Instansi -->
        <div class="bg-white p-6 rounded-2xl shadow-lg">
          <h3 class="text-2xl font-bold mb-4 text-slate-700">
            Progress per Instansi
          </h3>
          <div class="mb-4">
            <input
              type="text"
              id="searchInput"
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
              placeholder="Cari berdasarkan nama instansi..."
            />
          </div>

          <div class="overflow-x-auto">
            <table class="min-w-full bg-white responsive-table">
              <thead class="bg-gray-800 text-white">
                <tr>
                  <th
                    class="py-3 px-4 uppercase font-semibold text-sm text-left"
                  >
                    Instansi
                  </th>
                  <th class="py-3 px-4 uppercase font-semibold text-sm">
                    Proses
                  </th>
                  <th class="py-3 px-4 uppercase font-semibold text-sm">BTS</th>
                  <th class="py-3 px-4 uppercase font-semibold text-sm">TMS</th>
                  <th class="py-3 px-4 uppercase font-semibold text-sm">ACC</th>
                  <th class="py-3 px-4 uppercase font-semibold text-sm">
                    Total
                  </th>
                  <th class="py-3 px-4 uppercase font-semibold text-sm">
                    % ACC
                  </th>
                </tr>
              </thead>
              <tbody id="instansiTable" class="text-gray-700">
                <!-- Data akan diisi oleh JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="text-center mt-12 text-slate-500 text-sm">
        <p>
          Created OPS WTG 1 &copy; <span id="currentYear"></span>. Hak Cipta
          Dilindungi.
        </p>
        <div class="flex justify-center space-x-4 mt-2">
          <a href="#" class="hover:text-red-600">Info PPPK Paruh Waktu</a>
          <a href="#" class="hover:text-red-600"
            >Sumber Data Kantor Regional II BKN Surabaya</a
          >
        </div>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Data Instansi
        const instansiData = [
          {
            instansi: "Pemkab Magetan",
            proses: 459,
            bts: 34,
            tms: 0,
            acc: 628,
            total: 1121,
            persen_acc: "56.02%",
          },
          {
            instansi: "Pemkot Probolinggo",
            proses: 944,
            bts: 95,
            tms: 0,
            acc: 241,
            total: 1280,
            persen_acc: "18.83%",
          },
          {
            instansi: "Pemkab Nganjuk",
            proses: 1933,
            bts: 42,
            tms: 0,
            acc: 250,
            total: 2225,
            persen_acc: "11.24%",
          },
          {
            instansi: "Pemkab Ngawi",
            proses: 369,
            bts: 7,
            tms: 0,
            acc: 39,
            total: 415,
            persen_acc: "9.40%",
          },
          {
            instansi: "Pemkab Lumajang",
            proses: 624,
            bts: 21,
            tms: 0,
            acc: 56,
            total: 701,
            persen_acc: "7.99%",
          },
          {
            instansi: "Pemkot Surabaya",
            proses: 594,
            bts: 2,
            tms: 0,
            acc: 12,
            total: 608,
            persen_acc: "1.97%",
          },
          {
            instansi: "Pemkab Jember",
            proses: 3205,
            bts: 8,
            tms: 0,
            acc: 18,
            total: 3231,
            persen_acc: "0.56%",
          },
          {
            instansi: "Pemkab Blitar",
            proses: 100,
            bts: 0,
            tms: 0,
            acc: 0,
            total: 100,
            persen_acc: "0.00%",
          },
          {
            instansi: "Pemkot Kediri",
            proses: 78,
            bts: 5,
            tms: 0,
            acc: 0,
            total: 83,
            persen_acc: "0.00%",
          },
          {
            instansi: "Pemkot Madiun",
            proses: 18,
            bts: 0,
            tms: 0,
            acc: 0,
            total: 18,
            persen_acc: "0.00%",
          },
          {
            instansi: "Pemkab Mojokerto",
            proses: 15,
            bts: 0,
            tms: 0,
            acc: 0,
            total: 15,
            persen_acc: "0.00%",
          },
        ];

        // 1. Fungsi untuk mengisi tabel
        const tableBody = document.getElementById("instansiTable");
        instansiData.forEach((item) => {
          const row = `
                    <tr class="border-b border-gray-200 hover:bg-gray-100">
                        <td data-label="Instansi" class="py-3 px-4 text-left">${
                          item.instansi
                        }</td>
                        <td data-label="Proses" class="py-3 px-4 text-center">${item.proses.toLocaleString(
                          "id-ID"
                        )}</td>
                        <td data-label="BTS" class="py-3 px-4 text-center">${item.bts.toLocaleString(
                          "id-ID"
                        )}</td>
                        <td data-label="TMS" class="py-3 px-4 text-center">${item.tms.toLocaleString(
                          "id-ID"
                        )}</td>
                        <td data-label="ACC" class="py-3 px-4 text-center">${item.acc.toLocaleString(
                          "id-ID"
                        )}</td>
                        <td data-label="Total" class="py-3 px-4 text-center">${item.total.toLocaleString(
                          "id-ID"
                        )}</td>
                        <td data-label="% ACC" class="py-3 px-4 text-center"><span class="px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full">${
                          item.persen_acc
                        }</span></td>
                    </tr>
                `;
          tableBody.innerHTML += row;
        });

        // 2. Fungsi pencarian
        const searchInput = document.getElementById("searchInput");
        searchInput.addEventListener("keyup", function () {
          const filter = searchInput.value.toUpperCase();
          const rows = tableBody.getElementsByTagName("tr");
          for (let i = 0; i < rows.length; i++) {
            let cell = rows[i].getElementsByTagName("td")[0];
            if (cell) {
              let textValue = cell.textContent || cell.innerText;
              if (textValue.toUpperCase().indexOf(filter) > -1) {
                rows[i].style.display = "";
              } else {
                rows[i].style.display = "none";
              }
            }
          }
        });

        // 3. Animasi Hitung Angka
        function animateValue(element, start, end, duration) {
          if (!element) return;
          let startTimestamp = null;
          const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min(
              (timestamp - startTimestamp) / duration,
              1
            );
            const currentValue = Math.floor(progress * (end - start) + start);
            element.innerHTML = currentValue.toLocaleString("id-ID");
            if (progress < 1) {
              window.requestAnimationFrame(step);
            }
          };
          window.requestAnimationFrame(step);
        }

        // Elemen target dan nilai akhir
        const dataToAnimate = {
          proses: 8339,
          bts: 214,
          tms: 0,
          acc: 1244,
          total: 9797,
        };

        setTimeout(() => {
          for (const [id, value] of Object.entries(dataToAnimate)) {
            animateValue(document.getElementById(id), 0, value, 2000);
          }

          // Animasi persentase
          const percentageTextEl = document.getElementById("percentage-text");
          const targetPercentage = 12.7;
          let startTime = null;
          function animatePercentage(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = (timestamp - startTime) / 2000;
            const currentPercentage = Math.min(
              progress * targetPercentage,
              targetPercentage
            );
            percentageTextEl.textContent = currentPercentage.toFixed(2);
            if (progress < 1) {
              requestAnimationFrame(animatePercentage);
            } else {
              percentageTextEl.textContent = targetPercentage.toString();
            }
          }
          requestAnimationFrame(animatePercentage);
        }, 500);

        // 4. Set Tahun berjalan di Footer
        document.getElementById("currentYear").textContent =
          new Date().getFullYear();
      });
    </script>
  </body>
</html>
